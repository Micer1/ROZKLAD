<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Перевірка присутності</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    :root {
      /* Темна тема Pixel Experience */
      --md-sys-color-surface: rgba(20, 20, 20, 0.75); /* Напівпрозорий чорний */
      --md-sys-color-primary: #A8C7FA; /* Pixel Blue */
      --md-sys-color-on-primary: #062E6F;
      --md-sys-color-on-surface: #E3E3E3;
      --radius-card: 24px;
      --radius-btn: 100px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      font-family: 'Roboto', sans-serif;
      color: var(--md-sys-color-on-surface);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px 16px;

      /* ================================================================= */
      /* ↓↓↓ ВСТАВТЕ ПОСИЛАННЯ НА ВАШЕ ФОТО НИЖЧЕ (всередині лапок) ↓↓↓ */
      background-image: url('2.jpg');
      /* ================================================================= */

      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      background-repeat: no-repeat;
    }

    /* Ефект затемнення фону для кращої читабельності */
    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0, 0, 0, 0.4); /* Загальне затемнення картинки на 40% */
      z-index: 0;
      pointer-events: none;
    }

    .container {
      width: 100%;
      max-width: 500px;
      position: relative;
      z-index: 1; /* Щоб контент був над затемненням */
    }

    h1 {
      font-size: 26px;
      font-weight: 500;
      margin-bottom: 24px;
      text-align: center;
      color: #ffffff;
      text-shadow: 0 2px 10px rgba(0,0,0,0.5);
    }

    /* Картка списку */
    .student-list {
      background-color: var(--md-sys-color-surface);
      backdrop-filter: blur(15px); /* Ефект матового скла */
      -webkit-backdrop-filter: blur(15px);
      border-radius: var(--radius-card);
      padding: 8px 0;
      margin-bottom: 24px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.1);
      overflow: hidden;
    }

    .student label {
      display: flex;
      align-items: center;
      padding: 14px 24px;
      cursor: pointer;
      font-size: 16px;
      color: var(--md-sys-color-on-surface);
      transition: background 0.2s;
    }

    .student label:hover {
      background-color: rgba(255, 255, 255, 0.05);
    }

    .student label:active {
      background-color: rgba(168, 199, 250, 0.15);
    }

    .student:not(:last-child) {
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    }

    /* Чекбокси */
    input[type="checkbox"] {
      appearance: none;
      width: 22px;
      height: 22px;
      border: 2px solid #8E918F;
      border-radius: 6px; /* Більш м'які кути */
      margin-right: 16px;
      display: grid;
      place-content: center;
      background-color: transparent;
      transition: all 0.2s ease;
    }

    input[type="checkbox"]::before {
      content: "";
      width: 12px;
      height: 12px;
      transform: scale(0);
      box-shadow: inset 1em 1em var(--md-sys-color-on-primary);
      clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%);
      transition: 0.2s transform cubic-bezier(0.4, 0.0, 0.2, 1);
    }

    input[type="checkbox"]:checked {
      background-color: var(--md-sys-color-primary);
      border-color: var(--md-sys-color-primary);
    }
    input[type="checkbox"]:checked::before {
      transform: scale(1);
    }

    /* Кнопки */
    button {
      width: 100%;
      padding: 18px;
      font-size: 16px;
      font-weight: 500;
      letter-spacing: 0.5px;
      border: none;
      border-radius: var(--radius-btn);
      background-color: var(--md-sys-color-primary);
      color: var(--md-sys-color-on-primary);
      cursor: pointer;
      margin-bottom: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.4);
      transition: transform 0.1s, box-shadow 0.2s, filter 0.2s;
    }

    button:hover {
      filter: brightness(1.1);
    }

    button:active {
      transform: scale(0.96);
    }

    #okButton, #reasonButton { display: none; }

    /* Результат */
    #absentOutput {
      background-color: var(--md-sys-color-surface);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border-radius: var(--radius-card);
      padding: 24px;
      margin-top: 16px;
      color: var(--md-sys-color-on-surface);
      border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    #absentOutput div {
      display: flex;
      flex-direction: column;
      margin-bottom: 16px;
      padding-bottom: 16px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    #absentOutput div:last-child {
      border-bottom: none; margin-bottom: 0; padding-bottom: 0;
    }

    /* Dropdown */
    select {
      margin-top: 10px;
      padding: 12px;
      font-size: 15px;
      border-radius: 12px;
      background-color: rgba(0,0,0,0.4);
      color: white;
      border: 1px solid rgba(255,255,255,0.2);
      width: 100%;
      outline: none;
      cursor: pointer;
    }
    
    select:focus {
      border-color: var(--md-sys-color-primary);
      background-color: rgba(0,0,0,0.6);
    }

    #counter {
      margin: 16px 0;
      text-align: center;
      font-weight: 700;
      color: var(--md-sys-color-primary);
      text-shadow: 0 2px 4px rgba(0,0,0,0.8);
      font-size: 1.1rem;
    }

    #copyTextArea { position: absolute; left: -9999px; }

    /* Адаптивність */
    @media (min-width: 600px) {
      #absentOutput div {
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
      }
      select {
        width: 220px;
        margin-top: 0;
      }
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>Перевірка присутності</h1>

    <div class="student-list" id="studentList"></div>
    <button id="okButton" onclick="handleFirstOK()">Підтвердити відсутніх</button>
    <div id="counter"></div>
    <div id="absentOutput"></div>
    <button id="reasonButton" onclick="generateFinalList()">Сформувати та скопіювати</button>
  </div>

  <textarea id="copyTextArea" readonly></textarea>

  <script>
    // Оновлений список (Скорочені ініціали)
    const students = [
      "Білей М.Д.",
      "Бондарець М.Р.",
      "Гаркуша Р.С.",
      "Демченко В.А.",
      "Євстратенко І.В.",
      "Зайченко Я.П.",
      "Кирпа Г.С.",
      "Клименко С.О.",
      "Колесов М.В.",
      "Колісніченко І.Б.",
      "Кривенко М.О.",
      "Ледньов Є.О.",
      "Масалова В.М.",
      "Мурзін Т.Б.",
      "Нетудихата Б.С.",
      "Письменний Т.Р.",
      "Піньковський А.Р.",
      "Самарець І.Д.",
      "Сидоренко О.С.",
      "Скляренко Р.І.",
      "Ткаченко В.М.",
      "Третяк Г.П.",
      "Шеремет Д.С.",
      "Шкуренко П.К.",
      "Шульга О.Г."
    ];

    const reasons = [
      "сімейні обставини",
      "захворів",
      "без поважної причини",
      "хворіє",
      "пішов до лікаря",
      "захищає честь коледжу у конкурсі",
      "технічні проблеми",
      "погане самопочуття",
      "немає інтернету",
      "відсторонений",
      "за кордоном",
      "зайшов і відійшов"
    ];

    const listContainer = document.getElementById('studentList');
    const okButton = document.getElementById('okButton');
    const reasonButton = document.getElementById('reasonButton');
    const counter = document.getElementById('counter');
    const textArea = document.getElementById('copyTextArea');

    // Генерація списку
    students.forEach((name, index) => {
      const div = document.createElement('div');
      div.classList.add('student');
      div.innerHTML = `<label for="student${index}">
                        <input type="checkbox" id="student${index}" onchange="toggleOKButton()"> 
                        <span>${name}</span>
                       </label>`;
      listContainer.appendChild(div);
    });

    function toggleOKButton() {
      const absentCount = students.filter((_, index) => !document.getElementById(`student${index}`).checked).length;
      okButton.style.display = absentCount > 0 ? 'block' : 'none';
      
      if (absentCount === 0) {
          document.getElementById('absentOutput').innerHTML = '';
          reasonButton.style.display = 'none';
          counter.textContent = '';
      }
    }

    function handleFirstOK() {
      const absentOutput = document.getElementById('absentOutput');
      absentOutput.innerHTML = '';

      let absentCount = 0;
      students.forEach((name, index) => {
        if (!document.getElementById(`student${index}`).checked) {
          absentCount++;
          const select = document.createElement('select');
          select.id = `reason${index}`;

          const defaultOption = document.createElement('option');
          defaultOption.textContent = 'Оберіть причину...';
          defaultOption.disabled = false;
          defaultOption.selected = true;
          defaultOption.value = "";
          select.appendChild(defaultOption);

          reasons.forEach(reason => {
            const option = document.createElement('option');
            option.value = reason;
            option.textContent = reason;
            select.appendChild(option);
          });

          const line = document.createElement('div');
          const nameSpan = document.createElement('span');
          nameSpan.textContent = name;
          nameSpan.style.fontWeight = "500";
          
          line.appendChild(nameSpan);
          line.appendChild(select);
          absentOutput.appendChild(line);
        }
      });

      counter.textContent = `Відсутні: ${absentCount} з ${students.length}`;
      okButton.style.display = 'none';
      reasonButton.style.display = 'block';
      
      setTimeout(() => {
          absentOutput.scrollIntoView({ behavior: "smooth", block: "start" });
      }, 100);
    }

    function generateFinalList() {
      const lines = [];
      students.forEach((name, index) => {
        if (!document.getElementById(`student${index}`).checked) {
          const reasonSelect = document.getElementById(`reason${index}`);
          let reason = reasonSelect && reasonSelect.value ? reasonSelect.value : "без поважної причини";
          lines.push(`${name} (${reason})`);
        }
      });
      let listBody = lines.map((line, idx) => idx === lines.length - 1 ? line + '.' : line + ';').join("\n");
      const resultText = lines.length > 0 ? `Відсутні:\n${listBody}` : "Всі присутні.";
      
      const outDiv = document.getElementById('absentOutput');
      outDiv.innerText = resultText;
      outDiv.style.fontFamily = "monospace"; // Шрифт коду для зручності
      outDiv.style.whiteSpace = "pre-wrap";

      textArea.value = listBody;
      textArea.select();
      try {
        const successful = document.execCommand('copy');
        reasonButton.innerText = successful ? "Скопійовано!" : "Помилка";
        reasonButton.style.backgroundColor = successful ? "#81c995" : "#e2b6b6";
        reasonButton.style.color = "#000";
        
        setTimeout(() => {
            reasonButton.style.display = 'none';
        }, 2000);
        
      } catch (err) {
        alert("Помилка при копіюванні");
      }
    }
  </script>
</body>
</html>
